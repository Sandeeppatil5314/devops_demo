import { HttpClient } from "@angular/common/http";
import { isNull } from "@angular/compiler/src/output/output_ast";
import { Component, OnInit } from "@angular/core";
import { FormControl } from "@angular/forms";
import { NgbModal } from '@ng-bootstrap/ng-bootstrap';
import { ResponseDataModel, TravelHistoryRequestModel} from './travel-history.model';


@Component({
  selector: "app-travel-history",
  templateUrl: "./travel-history.component.html",
  styleUrls: ["./travel-history.component.scss"],
})
export class TravelHistoryComponent implements OnInit {
  // Sorting
 
  TravelHistoryRequest:TravelHistoryRequestModel = {};

  ResponseModel: ResponseDataModel = {
    success: false,
    data:'',
    ResponseTime:0
  };
  startDate = new FormControl(new Date());
  endDate = new FormControl(new Date());

  AvlList: any [] = [{"imei":350424067878502,"plate_no":1000},{"imei":350424069215075,"plate_no":1001},{"imei":350424065938555,"plate_no":1002},{"imei":350424065767806,"plate_no":1003},{"imei":350424069182648,"plate_no":1004},{"imei":350424060557178,"plate_no":1005},{"imei":350424067875870,"plate_no":1006},{"imei":350424067875714,"plate_no":1007},{"imei":350424067875979,"plate_no":1008},{"imei":350424067878361,"plate_no":1009},{"imei":350424067875961,"plate_no":1010},{"imei":350424067875730,"plate_no":1011},{"imei":350424067875813,"plate_no":1012},{"imei":350424067875953,"plate_no":1013},{"imei":350424067875896,"plate_no":1014},{"imei":350424067884237,"plate_no":1015},{"imei":350424067883767,"plate_no":1016},{"imei":350424067884070,"plate_no":1017},{"imei":350424065748525,"plate_no":1018},{"imei":350424067884310,"plate_no":1019},{"imei":350424065748640,"plate_no":2020},{"imei":350424067883924,"plate_no":2021},{"imei":350424067878445,"plate_no":2022},{"imei":350424067884153,"plate_no":2023},{"imei":350424067878296,"plate_no":2024},{"imei":350424065743047,"plate_no":2025},{"imei":350424065743146,"plate_no":2026},{"imei":350424065743278,"plate_no":2027},{"imei":350424065748798,"plate_no":2028},{"imei":350424065747204,"plate_no":2029},{"imei":350424065748566,"plate_no":2030},{"imei":350424065747386,"plate_no":2031},{"imei":350424065748533,"plate_no":2032},{"imei":350424065739045,"plate_no":2033},{"imei":350424065738310,"plate_no":2034},{"imei":350424065743096,"plate_no":2035},{"imei":350424065743195,"plate_no":2036},{"imei":350424065748632,"plate_no":2037},{"imei":350424065745703,"plate_no":2038},{"imei":350424065743245,"plate_no":2039},{"imei":350424065748657,"plate_no":2040},{"imei":350424065738468,"plate_no":2041},{"imei":350424065735050,"plate_no":2042},{"imei":350424065743153,"plate_no":2043},{"imei":357073290039821,"plate_no":2044},{"imei":350424065748665,"plate_no":2045},{"imei":350424065742171,"plate_no":2046},{"imei":350424065738443,"plate_no":2047},{"imei":350424065743161,"plate_no":2048},{"imei":350424065735191,"plate_no":2049},{"imei":350424065743294,"plate_no":2050},{"imei":350424065738971,"plate_no":2051},{"imei":350424065751081,"plate_no":2052},{"imei":350424065751099,"plate_no":2053},{"imei":350424065738831,"plate_no":2054},{"imei":350544508115246,"plate_no":2055},{"imei":350544508134668,"plate_no":2056},{"imei":350544508116129,"plate_no":2057},{"imei":350544508131623,"plate_no":2058},{"imei":350544508100172,"plate_no":2059},{"imei":350544508122606,"plate_no":2060},{"imei":350544508134676,"plate_no":2061},{"imei":350544500940740,"plate_no":2062},{"imei":350544508122531,"plate_no":2063},{"imei":350544500937647,"plate_no":2064},{"imei":350544500940823,"plate_no":2065},{"imei":350544500940989,"plate_no":2066},{"imei":350544508185082,"plate_no":2067},{"imei":350544508123257,"plate_no":2068},{"imei":350544500937506,"plate_no":2069},{"imei":354018118160443,"plate_no":2070},{"imei":354018118150386,"plate_no":2071},{"imei":354018118109788,"plate_no":6267},{"imei":354018118115124,"plate_no":6291},{"imei":354018118151889,"plate_no":6358},{"imei":354018116853866,"plate_no":6436},{"imei":359632109091824,"plate_no":6509},{"imei":359633106948115,"plate_no":12973},{"imei":354018119570400,"plate_no":14585},{"imei":359632109105301,"plate_no":18556},{"imei":354018118138019,"plate_no":18570},{"imei":354018118134695,"plate_no":18574},{"imei":354018118109929,"plate_no":18577},{"imei":350424063293466,"plate_no":22222},{"imei":354018119575409,"plate_no":26080},{"imei":354018119575391,"plate_no":26107},{"imei":354018118125537,"plate_no":26303},{"imei":354018118134711,"plate_no":26859},{"imei":358480088805348,"plate_no":27502},{"imei":354018118125693,"plate_no":28516},{"imei":357073293003550,"plate_no":34593},{"imei":354018116853957,"plate_no":36928},{"imei":354018118160567,"plate_no":37181},{"imei":354018116840855,"plate_no":37302},{"imei":354018118161961,"plate_no":37368},{"imei":354018116840640,"plate_no":37517},{"imei":354018118162506,"plate_no":37551},{"imei":354018118134471,"plate_no":37559},{"imei":354018118134620,"plate_no":37597},{"imei":354018118134539,"plate_no":37661},{"imei":354018118135031,"plate_no":37675},{"imei":354018118162035,"plate_no":37995},{"imei":354018118124464,"plate_no":38320},{"imei":354018117474662,"plate_no":38410},{"imei":354018119575656,"plate_no":40099},{"imei":354018119568628,"plate_no":40209},{"imei":354018118137920,"plate_no":41348},{"imei":354018118134703,"plate_no":42109},{"imei":354018118109192,"plate_no":48559},{"imei":354018118109770,"plate_no":52871},{"imei":354018118119712,"plate_no":55911},{"imei":354018119635930,"plate_no":58881},{"imei":354018118138092,"plate_no":66714},{"imei":354018118125685,"plate_no":66733},{"imei":354018118138043,"plate_no":66739},{"imei":354018118125545,"plate_no":66744},{"imei":354018118138001,"plate_no":66756},{"imei":354018118134828,"plate_no":66757},{"imei":354018118124340,"plate_no":66781},{"imei":354018118134760,"plate_no":66785},{"imei":354018118134752,"plate_no":66790},{"imei":354018118134968,"plate_no":66794},{"imei":354018118160336,"plate_no":66825},{"imei":354018118160823,"plate_no":66827},{"imei":354018118160906,"plate_no":66860},{"imei":354018118134992,"plate_no":66877},{"imei":354018118160583,"plate_no":66905},{"imei":354018118117401,"plate_no":66913},{"imei":354018118134844,"plate_no":66916},{"imei":354018118119761,"plate_no":66928},{"imei":354018118126022,"plate_no":66942},{"imei":354018119570921,"plate_no":67958},{"imei":350424065743039,"plate_no":74011},{"imei":357073293020265,"plate_no":74012},{"imei":354018118125768,"plate_no":88175},{"imei":354018118133655,"plate_no":88607},{"imei":354018118161862,"plate_no":88640},{"imei":359633107533601,"plate_no":90794},{"imei":358480083621559,"plate_no":94786},{"imei":358480083429706,"plate_no":94805},{"imei":359632104012767,"plate_no":94891},{"imei":358480083865495,"plate_no":95054},{"imei":358480083478182,"plate_no":95076},{"imei":358480089987145,"plate_no":95104},{"imei":359632104638702,"plate_no":95158},{"imei":350544508100024,"plate_no":95180},{"imei":354018119575573,"plate_no":100890},{"imei":354018119569063,"plate_no":101078},{"imei":350424067875946,"plate_no":101831},{"imei":354018118122476,"plate_no":102833},{"imei":354018118134935,"plate_no":103672},{"imei":354018119625691,"plate_no":104204},{"imei":354018118112303,"plate_no":104394},{"imei":350424067878452,"plate_no":104403},{"imei":354018118112295,"plate_no":104422},{"imei":354018118125875,"plate_no":104655},{"imei":354018118112311,"plate_no":104946},{"imei":350424065767731,"plate_no":105618},{"imei":354018118119829,"plate_no":105669},{"imei":354018118119969,"plate_no":106467},{"imei":350424067878270,"plate_no":106878},{"imei":354018118112196,"plate_no":107313},{"imei":354018118152556,"plate_no":107458},{"imei":354018118151913,"plate_no":110977},{"imei":359633108112520,"plate_no":112709},{"imei":354018119653503,"plate_no":113707},{"imei":354018118135023,"plate_no":115796},{"imei":350424065750497,"plate_no":116580},{"imei":354018118266208,"plate_no":116949},{"imei":358480083485013,"plate_no":118216},{"imei":359632108695997,"plate_no":118315},{"imei":359632108972891,"plate_no":118403},{"imei":358480086675826,"plate_no":118467},{"imei":358480083519639,"plate_no":118736},{"imei":350424065738872,"plate_no":119382},{"imei":350424067875912,"plate_no":119510},{"imei":359632108696755,"plate_no":119530},{"imei":357073293003543,"plate_no":119641},{"imei":357073293018152,"plate_no":119891},{"imei":358480089989513,"plate_no":120152},{"imei":350424063283350,"plate_no":120462},{"imei":350424069212494,"plate_no":121236},{"imei":354018119568404,"plate_no":121449},{"imei":359632109091980,"plate_no":122434},{"imei":359632109079092,"plate_no":122536},{"imei":350424069218160,"plate_no":122618},{"imei":359632109107810,"plate_no":122637},{"imei":352625692603713,"plate_no":122790},{"imei":354018118124365,"plate_no":123190},{"imei":354018118133713,"plate_no":123214},{"imei":354018118124225,"plate_no":123228},{"imei":354018118133481,"plate_no":124306},{"imei":354018118119886,"plate_no":124336},{"imei":354018118134638,"plate_no":124492},{"imei":354018118119779,"plate_no":126415},{"imei":354018118124381,"plate_no":126416},{"imei":354018118125495,"plate_no":128557},{"imei":354018118125735,"plate_no":128597},{"imei":354018119568099,"plate_no":131485},{"imei":354018119541146,"plate_no":131488},{"imei":354018117494173,"plate_no":132557},{"imei":354018119570319,"plate_no":132821},{"imei":354018118105406,"plate_no":133902},{"imei":354018118160609,"plate_no":135579},{"imei":354018118161730,"plate_no":135580},{"imei":354018118161821,"plate_no":135584},{"imei":354018118110463,"plate_no":135585},{"imei":354018117488308,"plate_no":135613},{"imei":354018118161789,"plate_no":135614},{"imei":354018118131444,"plate_no":135618},{"imei":354018118160435,"plate_no":135619},{"imei":354018118107436,"plate_no":135620},{"imei":354018118112279,"plate_no":135621},{"imei":354018118161904,"plate_no":135622},{"imei":354018118161748,"plate_no":135626},{"imei":354018117465991,"plate_no":135627},{"imei":354018118162183,"plate_no":135640},{"imei":354018118160633,"plate_no":135646},{"imei":354018118161706,"plate_no":135650},{"imei":354018118135015,"plate_no":135693},{"imei":350424063317885,"plate_no":136431},{"imei":359633100188734,"plate_no":136543},{"imei":354018118150741,"plate_no":136551},{"imei":354018118109424,"plate_no":136860},{"imei":359632109171600,"plate_no":136893},{"imei":354018118134430,"plate_no":137216},{"imei":354018118134414,"plate_no":137217},{"imei":354018117441844,"plate_no":137218},{"imei":354018118126006,"plate_no":137219},{"imei":354018119570327,"plate_no":137220},{"imei":354018118135007,"plate_no":137221},{"imei":354018119575482,"plate_no":137223},{"imei":354018118162175,"plate_no":137224},{"imei":354018118117351,"plate_no":137225},{"imei":354018118150113,"plate_no":137234},{"imei":354018118134513,"plate_no":137235},{"imei":354018117472716,"plate_no":137236},{"imei":354018118150360,"plate_no":137249},{"imei":359632109111580,"plate_no":137362},{"imei":354018118122815,"plate_no":137363},{"imei":354018118124456,"plate_no":137447},{"imei":354018118162084,"plate_no":137521},{"imei":354018118125776,"plate_no":137587},{"imei":354018118134794,"plate_no":137589},{"imei":354018119451411,"plate_no":137677},{"imei":354018118138191,"plate_no":139508},{"imei":354018119624413,"plate_no":139536},{"imei":359632108972933,"plate_no":141550},{"imei":359632109109113,"plate_no":142761},{"imei":359632109174901,"plate_no":143502},{"imei":359632109092046,"plate_no":143649},{"imei":357073293003519,"plate_no":144013},{"imei":359632109079134,"plate_no":144330},{"imei":359632109174885,"plate_no":144498},{"imei":359632109083227,"plate_no":144520},{"imei":359632109080058,"plate_no":144585},{"imei":359632109084696,"plate_no":144682},{"imei":359632109109246,"plate_no":144746},{"imei":359632109091972,"plate_no":144865},{"imei":359632109175106,"plate_no":144870},{"imei":359632109174893,"plate_no":144974},{"imei":359633108110284,"plate_no":145033},{"imei":359632109083383,"plate_no":145725},{"imei":354018118160716,"plate_no":146285},{"imei":359632109084605,"plate_no":146286},{"imei":359632109092038,"plate_no":146334},{"imei":359632109083235,"plate_no":146451},{"imei":354018118138217,"plate_no":146902},{"imei":354018118112550,"plate_no":147804},{"imei":354018118160559,"plate_no":148008},{"imei":354018119613184,"plate_no":148052},{"imei":354018118110646,"plate_no":148057},{"imei":354018118160625,"plate_no":148061},{"imei":354018118113517,"plate_no":148062},{"imei":354018118112121,"plate_no":148065},{"imei":354018118161607,"plate_no":148603},{"imei":354018118116874,"plate_no":148607},{"imei":354018118113830,"plate_no":148608},{"imei":354018118138175,"plate_no":148849},{"imei":354018119613333,"plate_no":148850},{"imei":350424063293219,"plate_no":149320},{"imei":354018118137953,"plate_no":149863},{"imei":354018118134729,"plate_no":149974},{"imei":354018118138183,"plate_no":149976},{"imei":354018119621559,"plate_no":149980},{"imei":359632109100419,"plate_no":151626},{"imei":354018119568321,"plate_no":151629},{"imei":354018118137961,"plate_no":151633},{"imei":359632109109196,"plate_no":152926},{"imei":354018118132707,"plate_no":152927},{"imei":354018118150394,"plate_no":152928},{"imei":354018118122831,"plate_no":152929},{"imei":354018118132731,"plate_no":152930},{"imei":354018118134570,"plate_no":152931},{"imei":354018118132566,"plate_no":152932},{"imei":354018118132665,"plate_no":152933},{"imei":359632109080009,"plate_no":152934},{"imei":354018118132509,"plate_no":152935},{"imei":359632109111499,"plate_no":154655},{"imei":357073293020190,"plate_no":155057},{"imei":359632109112620,"plate_no":155866},{"imei":359632109164472,"plate_no":157160},{"imei":354018118271661,"plate_no":157630},{"imei":354018119646572,"plate_no":158273},{"imei":354018119646580,"plate_no":158677},{"imei":354018119646424,"plate_no":159215},{"imei":354018119669541,"plate_no":159903},{"imei":354018118112634,"plate_no":160119},{"imei":354018118150857,"plate_no":160153},{"imei":354018118112113,"plate_no":160345},{"imei":354018118160468,"plate_no":160346},{"imei":354018118150287,"plate_no":160829},{"imei":354018116833553,"plate_no":160860},{"imei":354018118160526,"plate_no":160861},{"imei":354018118108046,"plate_no":160862},{"imei":354018116881339,"plate_no":160867},{"imei":354018118110349,"plate_no":160895},{"imei":354018118125941,"plate_no":161495},{"imei":354018118106560,"plate_no":161496},{"imei":354018117400550,"plate_no":161497},{"imei":354018118150915,"plate_no":161498},{"imei":354018117492664,"plate_no":161499},{"imei":354018118160617,"plate_no":161509},{"imei":354018118115090,"plate_no":161512},{"imei":354018118160393,"plate_no":161513},{"imei":350424063296758,"plate_no":162092},{"imei":354018118160450,"plate_no":162176},{"imei":354018118160534,"plate_no":162177},{"imei":354018118160385,"plate_no":162178},{"imei":354018118138423,"plate_no":162179},{"imei":354018116840830,"plate_no":162182},{"imei":354018118137938,"plate_no":162183},{"imei":354018117490684,"plate_no":162184},{"imei":354018118105158,"plate_no":162186},{"imei":354018118112501,"plate_no":162193},{"imei":354018118160369,"plate_no":162194},{"imei":354018118162001,"plate_no":163054},{"imei":354018118160542,"plate_no":163055},{"imei":354018118150832,"plate_no":163056},{"imei":354018118125818,"plate_no":163227},{"imei":354018118132574,"plate_no":163269},{"imei":354018119613259,"plate_no":163518},{"imei":359632109111036,"plate_no":163789},{"imei":354018118132483,"plate_no":163915},{"imei":354018118122864,"plate_no":163916},{"imei":354018118132681,"plate_no":164022},{"imei":354018118125719,"plate_no":164031},{"imei":354018118113913,"plate_no":164088},{"imei":354018118119878,"plate_no":164098},{"imei":359632109083326,"plate_no":164178},{"imei":354018118124472,"plate_no":164254},{"imei":359632109105319,"plate_no":164285},{"imei":354018118134810,"plate_no":164352},{"imei":354018118122716,"plate_no":164353},{"imei":354018118138035,"plate_no":164356},{"imei":354018118125636,"plate_no":164357},{"imei":354018118125479,"plate_no":164358},{"imei":354018118125446,"plate_no":164362},{"imei":354018118125933,"plate_no":164428},{"imei":359632109111069,"plate_no":164465},{"imei":354018118119688,"plate_no":164568},{"imei":354018118119944,"plate_no":164569},{"imei":354018118125859,"plate_no":164776},{"imei":359632109107786,"plate_no":164921},{"imei":359632109107778,"plate_no":165189},{"imei":354018118134786,"plate_no":165397},{"imei":354018118125842,"plate_no":165405},{"imei":354018118119936,"plate_no":165406},{"imei":354018118134877,"plate_no":165407},{"imei":354018118119787,"plate_no":165408},{"imei":354018118125867,"plate_no":165409},{"imei":354018118134737,"plate_no":165410},{"imei":354018118150964,"plate_no":165725},{"imei":354018118132640,"plate_no":165821},{"imei":354018118150980,"plate_no":165871},{"imei":354018118125917,"plate_no":165872},{"imei":354018118122765,"plate_no":165873},{"imei":354018118150774,"plate_no":165874},{"imei":354018118150105,"plate_no":166079},{"imei":359632109111135,"plate_no":166186},{"imei":354018118134943,"plate_no":166322},{"imei":354018118160740,"plate_no":166337},{"imei":354018118160492,"plate_no":166338},{"imei":359632109124138,"plate_no":166464},{"imei":354018118124233,"plate_no":166612},{"imei":354018118122583,"plate_no":166879},{"imei":354018116871785,"plate_no":167316},{"imei":354018118122666,"plate_no":167381},{"imei":354018119669533,"plate_no":169967},{"imei":354018119569097,"plate_no":170364},{"imei":354018118122807,"plate_no":170936},{"imei":354018119663684,"plate_no":171241},{"imei":354018118125644,"plate_no":175281},{"imei":354018118119738,"plate_no":175287},{"imei":354018118119795,"plate_no":175305},{"imei":354018118119720,"plate_no":175309},{"imei":354018118150816,"plate_no":175841},{"imei":354018118160575,"plate_no":177014},{"imei":354018118160898,"plate_no":177015},{"imei":354018118160666,"plate_no":177016},{"imei":354018118160500,"plate_no":177022},{"imei":354018118125628,"plate_no":177927},{"imei":354018118109846,"plate_no":178517},{"imei":359633107550332,"plate_no":179023},{"imei":359633108114112,"plate_no":179102},{"imei":359633107535093,"plate_no":179117},{"imei":359633106949550,"plate_no":179600},{"imei":354018118160427,"plate_no":179640},{"imei":354018118109432,"plate_no":179641},{"imei":354018118160880,"plate_no":179642},{"imei":354018118160831,"plate_no":179649},{"imei":354018118160641,"plate_no":179650},{"imei":354018118160591,"plate_no":180055},{"imei":354018118160724,"plate_no":180057},{"imei":354018118159833,"plate_no":180058},{"imei":354018118134976,"plate_no":180067},{"imei":354018119663445,"plate_no":180068},{"imei":354018118160922,"plate_no":180069},{"imei":359633107516101,"plate_no":180439},{"imei":359633106842607,"plate_no":180462},{"imei":359633106876449,"plate_no":180593},{"imei":354018118119977,"plate_no":180801},{"imei":354018118138118,"plate_no":180802},{"imei":359633106999233,"plate_no":180887},{"imei":354018118160658,"plate_no":181030},{"imei":354018118160518,"plate_no":181031},{"imei":354018118160419,"plate_no":181036},{"imei":354018118160682,"plate_no":181037},{"imei":354018118160674,"plate_no":181285},{"imei":354018118160757,"plate_no":181286},{"imei":354018118160930,"plate_no":181287},{"imei":354018118160856,"plate_no":181341},{"imei":354018119613416,"plate_no":181438},{"imei":359633107550324,"plate_no":181571},{"imei":354018118133499,"plate_no":181640},{"imei":359633106875177,"plate_no":181720},{"imei":359633106993947,"plate_no":182120},{"imei":359633107512811,"plate_no":182311},{"imei":354018118133580,"plate_no":182378},{"imei":354018118160344,"plate_no":182689},{"imei":354018118109861,"plate_no":186356},{"imei":354018119613267,"plate_no":186588},{"imei":354018118364383,"plate_no":187184},{"imei":354018118109366,"plate_no":187281},{"imei":354018118135270,"plate_no":187283},{"imei":354018118115611,"plate_no":187284},{"imei":359632109092012,"plate_no":188958},{"imei":357073292987548,"plate_no":189420},{"imei":354018116067137,"plate_no":190173},{"imei":357073292993116,"plate_no":190413},{"imei":357073293024374,"plate_no":190535},{"imei":354018116086277,"plate_no":190554},{"imei":357073297392694,"plate_no":190591},{"imei":357073293020182,"plate_no":190595},{"imei":357073293024465,"plate_no":190675},{"imei":357073293003501,"plate_no":190718},{"imei":357073293024200,"plate_no":190850},{"imei":354018118124316,"plate_no":191048},{"imei":350424069223442,"plate_no":192135},{"imei":354018118351760,"plate_no":192150},{"imei":354018117468136,"plate_no":194126},{"imei":354018118160476,"plate_no":194410},{"imei":357073293003592,"plate_no":195694},{"imei":350424067828887,"plate_no":196232},{"imei":354018118119704,"plate_no":196621},{"imei":354018118119951,"plate_no":196670},{"imei":359633108169736,"plate_no":197545},{"imei":350424063320517,"plate_no":197831},{"imei":354018118132616,"plate_no":201484},{"imei":354018118122781,"plate_no":201485},{"imei":350544500940914,"plate_no":201848},{"imei":354018118132749,"plate_no":202033},{"imei":350544508114793,"plate_no":202570},{"imei":359633101357684,"plate_no":202832},{"imei":357073293019416,"plate_no":203496},{"imei":354018118150212,"plate_no":203611},{"imei":354018118150378,"plate_no":203891},{"imei":359633108112124,"plate_no":204825},{"imei":354018118132657,"plate_no":204896},{"imei":354018117455489,"plate_no":207742},{"imei":354018118132525,"plate_no":211718},{"imei":354018118122856,"plate_no":211719},{"imei":354018118132491,"plate_no":211836},{"imei":359633108112595,"plate_no":214044},{"imei":359632108989382,"plate_no":214223},{"imei":354018119639494,"plate_no":214392},{"imei":359633108112579,"plate_no":222845},{"imei":354018119639668,"plate_no":225796},{"imei":354018119639437,"plate_no":225797},{"imei":354018119657371,"plate_no":226635},{"imei":359632109092590,"plate_no":230148},{"imei":359632108535987,"plate_no":232267},{"imei":358480089989570,"plate_no":232570},{"imei":354018118134653,"plate_no":233195},{"imei":354018119568396,"plate_no":233265},{"imei":354018119541377,"plate_no":235819},{"imei":354018119568479,"plate_no":236494},{"imei":354018119656811,"plate_no":237189},{"imei":359632108682482,"plate_no":237371},{"imei":350424063288268,"plate_no":238281},{"imei":354018118266000,"plate_no":238336},{"imei":354018119562506,"plate_no":244689},{"imei":354018119639445,"plate_no":244759},{"imei":354018119639528,"plate_no":244789},{"imei":354018119639585,"plate_no":245023},{"imei":354018119626699,"plate_no":245024},{"imei":354018118134562,"plate_no":245040},{"imei":354018119626871,"plate_no":245131},{"imei":359633108112363,"plate_no":245762},{"imei":354018117464762,"plate_no":245843},{"imei":359633108154985,"plate_no":249543},{"imei":354018118134489,"plate_no":252272},{"imei":357073295973537,"plate_no":252282},{"imei":354018119626715,"plate_no":252296},{"imei":354018119639601,"plate_no":252297},{"imei":350424065745786,"plate_no":253121},{"imei":350424063293383,"plate_no":253955},{"imei":354018119646598,"plate_no":253956},{"imei":350424064722836,"plate_no":253962},{"imei":350424065595652,"plate_no":254018},{"imei":350424067881662,"plate_no":254020},{"imei":354018118122724,"plate_no":254286},{"imei":354018118112394,"plate_no":254287},{"imei":354018117435648,"plate_no":254314},{"imei":354018117489728,"plate_no":254387},{"imei":354018118131386,"plate_no":254407},{"imei":350424065938639,"plate_no":255407},{"imei":350424065938654,"plate_no":255415},{"imei":357073293018210,"plate_no":255875},{"imei":354018118150303,"plate_no":256399},{"imei":350424065768028,"plate_no":256675},{"imei":350424069207346,"plate_no":256699},{"imei":350424067870137,"plate_no":256725},{"imei":350424067884104,"plate_no":256801},{"imei":350424069215133,"plate_no":256890},{"imei":350424069210837,"plate_no":256911},{"imei":354018119575649,"plate_no":259139},{"imei":354018119575508,"plate_no":259413},{"imei":359632109164480,"plate_no":261443},{"imei":354018119570004,"plate_no":261535},{"imei":359633106842508,"plate_no":261607},{"imei":354018119575664,"plate_no":262563},{"imei":359632109092525,"plate_no":263719},{"imei":354018119568552,"plate_no":263730},{"imei":354018119568560,"plate_no":264561},{"imei":354018119576266,"plate_no":264562},{"imei":354018119541278,"plate_no":264563},{"imei":354018119541393,"plate_no":264564},{"imei":354018119665770,"plate_no":264569},{"imei":354018119646515,"plate_no":264570},{"imei":354018119568248,"plate_no":264571},{"imei":357073298009750,"plate_no":265045},{"imei":357073293003394,"plate_no":265239},{"imei":350424063280612,"plate_no":265309},{"imei":350424063272619,"plate_no":265391},{"imei":357073293019549,"plate_no":265399},{"imei":350424063281974,"plate_no":265425},{"imei":357073298467073,"plate_no":265488},{"imei":354018119646499,"plate_no":269118},{"imei":354018118344815,"plate_no":269283},{"imei":354018118150238,"plate_no":269451},{"imei":354018119570566,"plate_no":272199},{"imei":354018119423006,"plate_no":272265},{"imei":354018119557324,"plate_no":272334},{"imei":357073298001732,"plate_no":272465},{"imei":357073293018145,"plate_no":274528},{"imei":354018117966956,"plate_no":279465},{"imei":354018118132723,"plate_no":281753},{"imei":350544508134593,"plate_no":282179},{"imei":354018118104789,"plate_no":282194},{"imei":354018118150204,"plate_no":282407},{"imei":358480083492977,"plate_no":284474},{"imei":354018118122641,"plate_no":284496},{"imei":350544500937720,"plate_no":285298},{"imei":350544508122457,"plate_no":285481},{"imei":354018119410995,"plate_no":285716},{"imei":354018119570533,"plate_no":285909},{"imei":354018119556607,"plate_no":286034},{"imei":359632108687499,"plate_no":286210},{"imei":354018119570541,"plate_no":287060},{"imei":354018119570558,"plate_no":287194},{"imei":354018119571119,"plate_no":287584},{"imei":350544508134650,"plate_no":287910},{"imei":354018119571150,"plate_no":288645},{"imei":350544508122440,"plate_no":289261},{"imei":350544508183137,"plate_no":289301},{"imei":354018119570962,"plate_no":289662},{"imei":354018119570475,"plate_no":289668},{"imei":354018118266315,"plate_no":289669},{"imei":354018119570947,"plate_no":289809},{"imei":354018119556854,"plate_no":289891},{"imei":354018119564338,"plate_no":290100},{"imei":354018119541187,"plate_no":291818},{"imei":354018119570525,"plate_no":291962},{"imei":354018117430235,"plate_no":291985},{"imei":354018118124399,"plate_no":291986},{"imei":354018118364425,"plate_no":293067},{"imei":354018119570384,"plate_no":293487},{"imei":354018117965750,"plate_no":295503},{"imei":354018119570392,"plate_no":295658},{"imei":354018119613341,"plate_no":297782},{"imei":354018119669632,"plate_no":297783},{"imei":354018119635310,"plate_no":300315},{"imei":357073297401198,"plate_no":301704},{"imei":357073295818252,"plate_no":301738},{"imei":357073297401172,"plate_no":301744},{"imei":350424065743237,"plate_no":301753},{"imei":357073293003659,"plate_no":306321},{"imei":354018119649881,"plate_no":306741},{"imei":354018119575540,"plate_no":306742},{"imei":350424063293474,"plate_no":307080},{"imei":350544508114934,"plate_no":307081},{"imei":354018118364466,"plate_no":308586},{"imei":354018118364458,"plate_no":308722},{"imei":354018118150253,"plate_no":308934},{"imei":354018117489801,"plate_no":308937},{"imei":354018118150188,"plate_no":308938},{"imei":354018118150352,"plate_no":308939},{"imei":354018118134661,"plate_no":308940},{"imei":354018118134646,"plate_no":308943},{"imei":354018118151228,"plate_no":308944},{"imei":354018118160708,"plate_no":308945},{"imei":354018119576258,"plate_no":308971},{"imei":354018118351778,"plate_no":309121},{"imei":354018119570574,"plate_no":309235},{"imei":357073293017337,"plate_no":311238},{"imei":354018119613192,"plate_no":311284},{"imei":350424063293235,"plate_no":311627},{"imei":357073293017063,"plate_no":311628},{"imei":354018119570467,"plate_no":313180},{"imei":350424063318065,"plate_no":313483},{"imei":357073293003360,"plate_no":313485},{"imei":354018118134505,"plate_no":313807},{"imei":354018117435853,"plate_no":314095},{"imei":354018118112261,"plate_no":314096},{"imei":354018118110422,"plate_no":314097},{"imei":354018118103708,"plate_no":314098},{"imei":354018118159981,"plate_no":314101},{"imei":354018118162167,"plate_no":314103},{"imei":354018117456123,"plate_no":314106},{"imei":354018118132699,"plate_no":314129},{"imei":354018119416331,"plate_no":314398},{"imei":354018118266091,"plate_no":314543},{"imei":354018118351687,"plate_no":314953},{"imei":358480083385882,"plate_no":314970},{"imei":357073293018228,"plate_no":314971},{"imei":354018118364391,"plate_no":315016},{"imei":354018118364235,"plate_no":315044},{"imei":354018118364318,"plate_no":315096},{"imei":354018118364300,"plate_no":315272},{"imei":354018118266117,"plate_no":315277},{"imei":354018119653198,"plate_no":315680},{"imei":350424060556998,"plate_no":316133},{"imei":357073293003402,"plate_no":316958},{"imei":350424063293078,"plate_no":317182},{"imei":358480088099520,"plate_no":317541},{"imei":359633101359573,"plate_no":317588},{"imei":359632104009904,"plate_no":319985},{"imei":359632108534535,"plate_no":319986},{"imei":357073293003618,"plate_no":320335},{"imei":350424063320582,"plate_no":320693},{"imei":354018119613275,"plate_no":320748},{"imei":359633108112298,"plate_no":321664},{"imei":359633108113015,"plate_no":321671},{"imei":359633108174876,"plate_no":321692},{"imei":359633108165122,"plate_no":321696},{"imei":359633108173969,"plate_no":321703},{"imei":359633107531506,"plate_no":321705},{"imei":359633107534658,"plate_no":321708},{"imei":359633102769143,"plate_no":321709},{"imei":359633108113205,"plate_no":321715},{"imei":359633106998995,"plate_no":321719},{"imei":358480087693455,"plate_no":322456},{"imei":358480082985716,"plate_no":322457},{"imei":358480087928265,"plate_no":322458},{"imei":358480087533842,"plate_no":322460},{"imei":358480088450319,"plate_no":322461},{"imei":359632109110004,"plate_no":322462},{"imei":358480087539864,"plate_no":322463},{"imei":359632109091915,"plate_no":322464},{"imei":358480081295810,"plate_no":322465},{"imei":359633108110425,"plate_no":322467},{"imei":358480087545556,"plate_no":322468},{"imei":358480086355106,"plate_no":322469},{"imei":358480087533800,"plate_no":322470},{"imei":358480086687722,"plate_no":322471},{"imei":358480087529857,"plate_no":322472},{"imei":358480086418953,"plate_no":322473},{"imei":359632109109972,"plate_no":322474},{"imei":358480087543817,"plate_no":322475},{"imei":350424063286510,"plate_no":326813},{"imei":350424067875888,"plate_no":326814},{"imei":359632108536274,"plate_no":326951},{"imei":350424065745620,"plate_no":326955},{"imei":350424065735019,"plate_no":326956},{"imei":350424065735274,"plate_no":326957},{"imei":350424065735183,"plate_no":326958},{"imei":350424065735266,"plate_no":326959},{"imei":350424065735142,"plate_no":326960},{"imei":354018118150196,"plate_no":326996},{"imei":359633108174942,"plate_no":327212},{"imei":359633108113056,"plate_no":328054},{"imei":359633100023436,"plate_no":328074},{"imei":359633100188890,"plate_no":328075},{"imei":359633100188908,"plate_no":328076},{"imei":359633100201115,"plate_no":328077},{"imei":359633100200455,"plate_no":328078},{"imei":359633108174892,"plate_no":328079},{"imei":359633106842524,"plate_no":328081},{"imei":359633100002141,"plate_no":328082},{"imei":354018118266042,"plate_no":329473},{"imei":354018118364474,"plate_no":329474},{"imei":350424063272460,"plate_no":330150},{"imei":350424063278400,"plate_no":330513},{"imei":350424063294654,"plate_no":330514},{"imei":350424060717590,"plate_no":330805},{"imei":350424067884195,"plate_no":330806},{"imei":357073293001315,"plate_no":330818},{"imei":350424065938647,"plate_no":330819},{"imei":350424065739052,"plate_no":331396},{"imei":350424066556075,"plate_no":331397},{"imei":350424065743179,"plate_no":332041},{"imei":350424065745778,"plate_no":332042},{"imei":350424065738914,"plate_no":332043},{"imei":350424065750505,"plate_no":332044},{"imei":350424065742999,"plate_no":332045},{"imei":350424065743104,"plate_no":332046},{"imei":359633100188452,"plate_no":332242},{"imei":359633100188437,"plate_no":332243},{"imei":359633101070477,"plate_no":332245},{"imei":359633100198675,"plate_no":332246},{"imei":359633101357692,"plate_no":332247},{"imei":359633100188874,"plate_no":332249},{"imei":359633100188395,"plate_no":332250},{"imei":359633100188882,"plate_no":332251},{"imei":354018111798835,"plate_no":332252},{"imei":354018116121108,"plate_no":332253},{"imei":354018113118867,"plate_no":332254},{"imei":354018111982595,"plate_no":332256},{"imei":354018116215173,"plate_no":332257},{"imei":354018115977922,"plate_no":332258},{"imei":354018113118941,"plate_no":332259},{"imei":354018111982686,"plate_no":332260},{"imei":354018111982496,"plate_no":332261},{"imei":354018116144944,"plate_no":332262},{"imei":354018116135736,"plate_no":332263},{"imei":354018116138078,"plate_no":332264},{"imei":354018116243241,"plate_no":332265},{"imei":354018116219894,"plate_no":332267},{"imei":354018116146709,"plate_no":332268},{"imei":354018116272067,"plate_no":332269},{"imei":354018116269444,"plate_no":332270},{"imei":359632109091964,"plate_no":383472},{"imei":359632109177268,"plate_no":631511}];

  LastSyncSpinner = true;
  LastSync: string;
  public dateTime: Date;
  booleanValue: any = false;
  CSVSpinner = false;
  isSpinner = true;
  search: any;
  zoom = 18;
  page = 1;
  pageSize = 10;
  constructor(private http: HttpClient,
    private modalService: NgbModal
    ) {
  }
  lat;
  lng;
  ngOnInit(): void {
    this.LastSyncSpinner = true;
    this.http.get<{data: [{ q_TimeStamp: string}]}>('https://airflowvts.gwclogistics.com:4430/api/v1/newapi/LastSync')
    .subscribe((response) => {
      this.LastSyncSpinner = false;
      this.LastSync = response.data[0].q_TimeStamp.replace(/T|Z/gi,' ');
    })
  }
  popup = false;
  travelHistory= [];

  onChangeSearch() {
    console.log("changes in serch");
    this.pageSize = this.travelHistory.length;
    if (this.search === "") {
      this.pageSize = 10;
    }
  }
  changeLocation(a, b) {
    this.lat = a;
    this.lng = b;
    this.popup = true;
  }

  filterData() {
    this.isSpinner = false;
    // console.log(form.value.avlno);
    const data = {
      startDate: this.TravelHistoryRequest.startDate.replace(/T/gi,' ') + ':00.000',
      endDate: this.TravelHistoryRequest.endDate.replace(/T/gi,' ') + ':00.000',
      avlno: this.TravelHistoryRequest.avlno
    };

    if (!data.avlno) {
      data.avlno ='';
      this.http
        .post("https://airflowvts.gwclogistics.com:4430/api/v1/newapi/travel-History", { data }) 
        .subscribe((result) => {
          console.log(result);
          this.isSpinner = true; 
          const data: any = result;
          this.travelHistory = [];
          for (let i = 0; i < data.length; i++) {
            this.travelHistory.push(data[i]);
          }
        });
    } else {
      console.log(data.avlno);
      this.http
        .post("https://airflowvts.gwclogistics.com:4430/api/v1/newapi/th-of-avl", { data })
        .subscribe((result) => {
          console.log(result);
          this.isSpinner = true;
          const data: any = result;
          this.travelHistory = [];
          for (let i = 0; i < data.length; i++) {
            this.travelHistory.push(data[i]);
          }
        });
    }
  }

   onSelectedChange(value: number) {
    // do something else with the value
    console.log(value);

    // rememberto update the selectedValue
    this.pageSize = value;
    this.travelHistory = this.travelHistory;
  }

  sortFunction(colName, boolean) {
    console.log('sorting');
    if (boolean == true){
        this.travelHistory.sort((a, b) => a[colName] < b[colName] ? 1 : a[colName] > b[colName] ? -1 : 0)
        this.booleanValue = !this.booleanValue
    }
    else{
        this.travelHistory.sort((a, b) => a[colName] > b[colName] ? 1 : a[colName] < b[colName] ? -1 : 0)
        this.booleanValue = !this.booleanValue
    }
}

// CreateCSV(modal) { 
//   this.modalService.open(modal, { size: 'md' });
//   this.CSVSpinner = true;
//   const data = {
//     startDate: this.TravelHistoryRequest.startDate.replace(/T/gi,' ') + ':00.000',
//     endDate: this.TravelHistoryRequest.endDate.replace(/T/gi,' ') + ':00.000',
//     avlno: this.TravelHistoryRequest.avlno
//   };
//   if (!data.avlno) {
//     data.avlno ='';
//     this.http
//       .post("https://airflowvts.gwclogistics.com:4430/api/v1/newapi/createCsvTH", { data })
//       .subscribe((result: ResponseDataModel) => {
//         console.log(result);
//         this.CSVSpinner = false;
//         this.TravelHistoryRequest.file_name = result.data;
//         this.ResponseModel.success = result.success;
//         console.log(this.ResponseModel);
//       });
//   }
// }

DownloadTravelHistoryReport() {
    const replacer = (key, value) => (value === null ? '' : value); // specify how you want to handle null values here
  const header = Object.keys(this.travelHistory[0]);
  const csv = this.travelHistory.map((row) =>
    header
      .map((fieldName) => JSON.stringify(row[fieldName], replacer))
      .join(',')
  );
  csv.unshift(header.join(','));
  const csvArray = csv.join('\r\n');

  const a = document.createElement('a');
  const blob = new Blob([csvArray], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);

  a.href = url;
  a.download = 'Travel-History-Report.csv';
  a.click();
}



}




